Var="$HOME/opt/lua/less/lib"
Doc="$HOME/opt/lua/less/doc"

mkdir -p $Var $Doc

cat<<EOF>$Var/vimrc
        set backupdir-=.
	set backupdir^=~/tmp,/tmp
	set nocompatible              " required
	filetype plugin indent on
	set modelines=3
	set scrolloff=3
	set autoindent
	set hidden "remember ls
	set wildmenu
	set wildmode=list:longest
	set visualbell
	set ttyfast
	set backspace=indent,eol,start
	set laststatus=2
	set splitbelow
	set mouse=a
	set title
	set number
	autocmd BufEnter * cd %:p:h
	set showmatch
	set matchtime=15
	set background=light
	set syntax=on
	syntax enable
	set ignorecase
	set incsearch
	set smartcase
	set showmatch
	set hlsearch
	colorscheme delek 
	set hlsearch!
	nnoremap <F3> :set hlsearch!<CR>
	set ruler
	set formatoptions+=cro
EOF


cat<<EOF>$Var/vimrc
        set backupdir-=.
	set backupdir^=~/tmp,/tmp
	set nocompatible              " required
	filetype plugin indent on
	set modelines=3
	set scrolloff=3
	set autoindent
	set hidden "remember ls
	set wildmenu
	set wildmode=list:longest
	set visualbell
	set ttyfast
	set backspace=indent,eol,start
	set laststatus=2
	set splitbelow
	set mouse=a
	set title
	set number
	autocmd BufEnter * cd %:p:h
	set showmatch
	set matchtime=15
	set background=light
	set syntax=on
	syntax enable
	set ignorecase
	set incsearch
	set smartcase
	set showmatch
	set hlsearch
	colorscheme delek 
	set hlsearch!
	nnoremap <F3> :set hlsearch!<CR>
	set ruler
	set formatoptions+=cro
EOF

prep() {
  pycoo -d $Doc *.lua > /dev/null
}

if [ -z "$1" ]; then
  echo
  echo "Type './lu help' for a list of options"
  prep
else
  x=$1
  shift
  echo "$*"
  if   [[ "$x" == "ed"      ]]; then vim -u $Var/vimrc $1
  elif [[ "$x" == "zap"     ]]; then rm -f $Doc/*.md
  elif [[ "$x" == "pull"    ]]; then git pull
  #elif [[ "$x" == "help"    ]]; then help
  elif [[ "$x" == "ok"      ]]; then lua -i "tests()" lib.lua
  elif [[ "$x" == "push"    ]]; then
     git status
     git commit -am "commiting"
     git push
  else
    prep
    f=$x
    g="$Var/$f"
    MAIN=$x lua $f
  fi
fi
